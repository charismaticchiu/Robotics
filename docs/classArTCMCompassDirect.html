<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Aria: ArTCMCompassDirect Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>ArTCMCompassDirect Class Reference</h1><code>#include &lt;ArTCMCompassDirect.h&gt;</code>
<p>
<p>Inheritance diagram for ArTCMCompassDirect:
<p><center><img src="classArTCMCompassDirect.png" usemap="#ArTCMCompassDirect_map" border="0" alt=""></center>
<map name="ArTCMCompassDirect_map">
<area href="classArTCM2.html" alt="ArTCM2" shape="rect" coords="0,0,138,24">
</map>
<a href="classArTCMCompassDirect-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Talk to a compass directly over a computer serial port. 
<p>
This class configures and recieves compass heading data from a TCM2 or TCM2.5 compass directly over a computer serial port, rather than via tha robot. This class cannot recieve pitch, roll or temperature data from the compass. On all Pioneer robots, the TCM compass (as originally installed by MobileRobots) is connected to the robot microcontroller, so if you have a Pioneer with this configuration, you should instead use the <a class="el" href="classArTCMCompassRobot.html">ArTCMCompassRobot</a> class. Only use this class if you have connected the compass to the computer serial port.<p>
You can create an instance of this class directly, or using an <a class="el" href="classArCompassConnector.html">ArCompassConnector</a> object and giving the "-compassType serialtcm" program argument.<p>
If you create your own ArTCMCompassDirect object, you must call the <a class="el" href="classArTCMCompassDirect.html#a13">read()</a> method periodically (ideally at the same rate the compass sends data, approx. 8 hz by default) to read and parse incoming data. You can use an <a class="el" href="classArRobot.html">ArRobot</a> callback to do this, for example: <div class="fragment"><pre class="fragment">    <a class="code" href="classArRetFunctor1C.html">ArRetFunctor1C&lt;int, ArTCMCompassDirect, unsigned int&gt;</a> compassReadFunc(myCompass, &amp;<a class="code" href="classArTCMCompassDirect.html#a13">ArTCMCompassDirect::read</a>, 10);
    myRobot-&gt;addSensorInterpTask(<span class="stringliteral">"ArTCMCompassDirect read"</span>, 200, &amp;compassReadFunc);
</pre></div><p>
If you use <a class="el" href="classArCompassConnector.html">ArCompassConnector</a>, however, it will automatically do this. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a0" doxytag="ArTCMCompassDirect::ArTCMCompassDirect"></a>
&nbsp;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a1" doxytag="ArTCMCompassDirect::ArTCMCompassDirect"></a>
&nbsp;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a2" doxytag="ArTCMCompassDirect::blockingConnect"></a>
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>blockingConnect</b> (unsigned long connectTimeout=5000)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a3">commandAutoCalibration</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a4">commandContinuousPackets</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a5">commandJustCompass</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a6" doxytag="ArTCMCompassDirect::commandOff"></a>
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandOff</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a7" doxytag="ArTCMCompassDirect::commandOnePacket"></a>
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandOnePacket</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a8">commandSoftReset</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a9" doxytag="ArTCMCompassDirect::commandStopCalibration"></a>
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandStopCalibration</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a10" doxytag="ArTCMCompassDirect::commandUserCalibration"></a>
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandUserCalibration</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a11">connect</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a12" doxytag="ArTCMCompassDirect::getDeviceConnetion"></a>
<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>getDeviceConnetion</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a13">read</a> (unsigned int msWait=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a14" doxytag="ArTCMCompassDirect::setDeviceConnection"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setDeviceConnection</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a3" doxytag="ArTCMCompassDirect::commandAutoCalibration"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ArTCMCompassDirect::commandAutoCalibration           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send commands to begin calibrating 
<p>
Implements <a class="el" href="classArTCM2.html#a3">ArTCM2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ArTCMCompassDirect::commandContinuousPackets"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ArTCMCompassDirect::commandContinuousPackets           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send commands to start/stop sending data. 
<p>
Implements <a class="el" href="classArTCM2.html#a4">ArTCM2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ArTCMCompassDirect::commandJustCompass"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void ArTCMCompassDirect::commandJustCompass           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Same as <a class="el" href="classArTCMCompassDirect.html#a4">commandContinuousPackets()</a> in this implementation. 
<p>
Implements <a class="el" href="classArTCM2.html#a5">ArTCM2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ArTCMCompassDirect::commandSoftReset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void ArTCMCompassDirect::commandSoftReset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Not implemented yet. 
<p>
Implements <a class="el" href="classArTCM2.html#a8">ArTCM2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="ArTCMCompassDirect::connect"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ArTCMCompassDirect::connect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open device connection if not yet open and send commands to configure compass. 
<p>
Reimplemented from <a class="el" href="classArTCM2.html#a11">ArTCM2</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="ArTCMCompassDirect::read"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ArTCMCompassDirect::read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msWait</em> = <code>1</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read all available data, store, and call callbacks if any were added. unsigned int msWait If 0, wait indefinately for new data. Otherwise, wait a maximum of this many milliseconds for data to arrive. <dl compact><dt><b>Returns:</b></dt><dd>A value &gt; 0 if messages were recieved from the compass, 0 if no data was recieved, and a value &lt; 0 on error reading from the compass. </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>ArTCMCompassDirect.h<li>ArTCMCompassDirect.cpp</ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jan 7 10:34:44 2010 for Aria by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
