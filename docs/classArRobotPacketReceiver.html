<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Aria: ArRobotPacketReceiver Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>ArRobotPacketReceiver Class Reference</h1><code>#include &lt;ArRobotPacketReceiver.h&gt;</code>
<p>
<a href="classArRobotPacketReceiver-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Given a device connection it receives packets from the robot through it. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a0">ArRobotPacketReceiver</a> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *deviceConnection, bool allocatePackets=false, unsigned char sync1=0xfa, unsigned char sync2=0xfb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor with assignment of a device connection.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a1">ArRobotPacketReceiver</a> (bool allocatePackets=false, unsigned char sync1=0xfa, unsigned char sync2=0xfb)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor without an already assigned device connection.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a2" doxytag="ArRobotPacketReceiver::getDeviceConnection"></a>
<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a2">getDeviceConnection</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the device this instance receives packets from. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a3" doxytag="ArRobotPacketReceiver::isAllocatingPackets"></a>
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a3">isAllocatingPackets</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets whether or not the receiver is allocating packets. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classArRobotPacket.html">ArRobotPacket</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a4">receivePacket</a> (unsigned int msWait=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Receives a packet from the robot if there is one available.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a5" doxytag="ArRobotPacketReceiver::setDeviceConnection"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a5">setDeviceConnection</a> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *deviceConnection)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the device this instance receives packets from. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a6" doxytag="ArRobotPacketReceiver::~ArRobotPacketReceiver"></a>
virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArRobotPacketReceiver.html#a6">~ArRobotPacketReceiver</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom">{ <b>STATE_SYNC1</b>, 
<b>STATE_SYNC2</b>, 
<b>STATE_ACQUIRE_DATA</b>
 }</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p0" doxytag="ArRobotPacketReceiver::myAllocatePackets"></a>
bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>myAllocatePackets</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p1" doxytag="ArRobotPacketReceiver::myDeviceConn"></a>
<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>myDeviceConn</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p2" doxytag="ArRobotPacketReceiver::myPacket"></a>
<a class="el" href="classArRobotPacket.html">ArRobotPacket</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>myPacket</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p3" doxytag="ArRobotPacketReceiver::mySync1"></a>
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><b>mySync1</b></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="p4" doxytag="ArRobotPacketReceiver::mySync2"></a>
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><b>mySync2</b></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a1" doxytag="ArRobotPacketReceiver::ArRobotPacketReceiver"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ArRobotPacketReceiver::ArRobotPacketReceiver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname" nowrap> <em>allocatePackets</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>sync1</em> = <code>0xfa</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>sync2</em> = <code>0xfb</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor without an already assigned device connection. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>allocatePackets</em>&nbsp;</td><td>whether to allocate memory for the packets before returning them (true) or to just return a pointer to an internal packet (false)... most everything should use false as this will help prevent many memory leaks or corruptions </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sync1</em>&nbsp;</td><td>first byte of the header this receiver will receive, this should be left as the default in nearly all cases, ie don't mess with it </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sync2</em>&nbsp;</td><td>second byte of the header this receiver will receive, this should be left as the default in nearly all cases, ie don't mess with it </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="ArRobotPacketReceiver::ArRobotPacketReceiver"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ArRobotPacketReceiver::ArRobotPacketReceiver           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>deviceConnection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>allocatePackets</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>sync1</em> = <code>0xfa</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>sync2</em> = <code>0xfb</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor with assignment of a device connection. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>deviceConnection</em>&nbsp;</td><td>the connection which the receiver will use </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>allocatePackets</em>&nbsp;</td><td>whether to allocate memory for the packets before returning them (true) or to just return a pointer to an internal packet (false)... most everything should use false as this will help prevent many memory leaks or corruptions </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sync1</em>&nbsp;</td><td>first byte of the header this receiver will receive, this should be left as the default in nearly all cases, ie don't mess with it </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sync2</em>&nbsp;</td><td>second byte of the header this receiver will receive, this should be left as the default in nearly all cases, ie don't mess with it </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="ArRobotPacketReceiver::receivePacket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classArRobotPacket.html">ArRobotPacket</a> * ArRobotPacketReceiver::receivePacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msWait</em> = <code>0</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Receives a packet from the robot if there is one available. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msWait</em>&nbsp;</td><td>how long to block for the start of a packet, nonblocking if 0 </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>NULL if there are no packets in alloted time, otherwise a pointer to the packet received, if allocatePackets is true than the place that called this function owns the packet and should delete the packet when done... if allocatePackets is false then nothing must store a pointer to this packet, the packet must be used and done with by the time this method is called again</dd></dl>
this case can't happen since c can't be over that so taking it out if (c &gt; 255) { <a class="el" href="classArLog.html#e4">ArLog::log</a>(<a class="el" href="classArLog.html#w2w5">ArLog::Normal</a>, "ArRobotPacketReceiver::receivePacket: bad packet, more than 255 bytes"); state = STATE_SYNC1; break; }     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>ArRobotPacketReceiver.h<li>ArRobotPacketReceiver.cpp</ul>
<hr size="1"><address style="align: right;"><small>Generated on Thu Jan 7 10:34:44 2010 for Aria by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
